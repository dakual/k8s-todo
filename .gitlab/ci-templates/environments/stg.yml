variables:
  RUNNER: dev
  ENV: stg
  K8S_CLUSTER: ci-todo/app:minikube
  K8S_NAMESPACE: staging


stg:build:backend:
  extends: 
    - .stg-rules
    - .build
  variables:
    APP: frontend

stg:build:frontend:
  extends: 
    - .stg-rules
    - .build
  variables:
    APP: backend

stg:deploy:
  extends: 
    - .stg-rules
    - .deploy
  needs:
    - stg:build:backend
    - stg:build:frontend
  when: manual

stg:release:
  extends: 
    - .stg-rules
    - .release
  needs:
    - stg:deploy
  when: manual

stg:destroy:
  extends: 
    - .stg-rules
    - .destroy
  needs:
    - stg:deploy
  when: manual